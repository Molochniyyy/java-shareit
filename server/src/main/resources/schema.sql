CREATE TABLE IF NOT EXISTS users (
id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
name VARCHAR(255) NOT NULL,
email VARCHAR(512) NOT NULL,
CONSTRAINT pk_user PRIMARY KEY (id),
CONSTRAINT UQ_USER_EMAIL UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS requests
(
    ID           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DESCRIPTION  VARCHAR(1024) NOT NULL UNIQUE,
    REQUESTER_ID BIGINT        NOT NULL REFERENCES USERS (ID),
    CREATED TIMESTAMP WITHOUT TIME ZONE NOT NULL
);

CREATE TABLE IF NOT EXISTS items
(
    ID           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME         VARCHAR(256),
    DESCRIPTION  VARCHAR(1024),
    IS_AVAILABLE BOOLEAN,
    OWNER_ID     BIGINT REFERENCES USERS (ID),
    REQUEST_ID   BIGINT REFERENCES REQUESTS (ID)
);

CREATE TABLE IF NOT EXISTS comments
(
    ID        BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TEXT      VARCHAR(2048) UNIQUE,
    ITEM_ID   BIGINT REFERENCES ITEMS (ID),
    AUTHOR_ID BIGINT REFERENCES USERS (ID),
    CREATED   timestamp without time zone
);

CREATE TABLE IF NOT EXISTS bookings
(
    ID         BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    START_DATE timestamp without time zone,
    END_DATE   timestamp without time zone,
    ITEM_ID    BIGINT REFERENCES ITEMS (ID),
    BOOKER_ID  BIGINT REFERENCES USERS (ID),
    STATUS     VARCHAR
);